---
title: "Homework 1"
author: "WL3010"
date: "2025-09-20"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

## Problem 1

We load the dataset and make a scatterplot:

```{r}
library(moderndive)
library(ggplot2)

data("early_january_weather")

p <- ggplot(early_january_weather, aes(x = time_hour, y = temp, color = humid)) +
  geom_point(alpha = 0.6) +
  labs(title = "Temperature vs Time (colored by Humidity)",
       x = "Hour",
       y = "Temperature (F)",
       color = "Humidity") +
  theme_minimal()

p

# save plot to file
ggsave("scatterplot_temp_time.png", plot = p, width = 7, height = 5)




## Problem 2

library(tidyverse)

set.seed(123)

# 创建四类变量
num_var <- rnorm(10)                           # 数值型
log_var <- num_var > 0                         # 逻辑型
char_var <- letters[1:10]                      # 字符型
fac_var <- factor(rep(c("A","B","C"), length.out = 10)) # 因子型

# 合并到数据框
df <- data.frame(
  num_var = num_var,
  log_var = log_var,
  char_var = char_var,
  fac_var = fac_var
)

df
mean(pull(df, num_var))   # 可以，正常平均值
mean(pull(df, log_var))   # 可以，TRUE=1, FALSE=0，结果是比例
# mean(pull(df, char_var)) # 会报错，字符无法取均值
# mean(pull(df, fac_var))  # 会报错，因子无法直接取均值
as.numeric(pull(df, log_var))    # TRUE/FALSE 转为 1/0
as.numeric(pull(df, char_var))   # 字符转数值，报 NA
as.numeric(pull(df, fac_var))    # 因子转内部编码 (A=1, B=2, C=3)

mean(as.numeric(pull(df, log_var)))   # 合理，相当于比例
mean(as.numeric(pull(df, fac_var)))   # 有值，但仅代表编码平均，没有实际意义
